"use strict";var WCCG_Generator={init:function(){this.generate_coupons(0,this)},generate_coupons:function(e,r){var t={action:"wccg_generate_coupons",form_data:jQuery(".wccg-wrap :input").serialize(),batch_step:e};jQuery.post(ajaxurl,t,function(e){(e=JSON.parse(e)).message&&r.add_message(e.message),"done"==e.step?r.completed(r,parseInt(jQuery('[name="number_of_coupons"]').val()),e.total_coupons_generated):r.generate_coupons(e.step,r),r.progress_bar(e.progress)})},progress_bar:function(e){jQuery(".wc-coupon-generator-progress-bar .progress").css("width",e+"%"),jQuery(".wc-coupon-generator-progress-percentage").html(e+"%"),jQuery(".inner-progress").css("width",jQuery(".wc-coupon-generator-progress-bar").width())},completed:function(e,r,t){jQuery(".wc-coupon-generator-progress-bar + .spinner").remove(),jQuery(".wc-coupon-generator-completed-actions").show();var o=jQuery(".wc-coupon-generator-completed-actions");o.show(),o.html(o.html().replace(/{{ couponGenerator.quantity }}/,r));var s=o.find("a");console.log(s.attr("href").replace("quantity","quantity="+r)),s.attr("href",s.attr("href").replace("quantity","quantity="+r))},add_message:function(e){jQuery(".wc-coupon-generator-progress-messages").prepend('<span class="wc-coupon-generator-progress-message">'+e+"</span><br/>")}};!function(o){o(".wccg-next").on("click",function(e){var r=o(".active-step"),t=r.next();r.removeClass("active-step").addClass("hidden"),t.removeClass("hidden").addClass("active-step"),o(".step.active").removeClass("active").next().addClass("active")}),o(".wccg-start").on("click",function(e){WCCG_Generator.init()})}(jQuery);