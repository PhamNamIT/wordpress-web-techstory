jQuery(document).ready(function(o){"use strict";if("undefined"==typeof woo_sctr_checkout_countdown_shortcode)return!1;if("no"===woo_sctr_checkout_countdown_shortcode.sctv_checkout_countdown_check)return!1;let t,c,e;function n(t,c,e){if("undefined"==typeof wc_cart_fragments_params)return!1;if(!t||!c||!e)return!1;switch(0===o(".woo-sctr-checkout-countdown-wrap-wrap .woo-sctr-countdown-timer").length&&setTimeout(function(){window.location.reload()},c),function(o){for(var t=o+"=",c=document.cookie.split(";"),e=0;e<c.length;e++){for(var n=c[e];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""}("sctv_checkout_countdown")||(jQuery(".woo-sctr-checkout-countdown-popup-wrap.woo-sctr-checkout-countdown-sticky-top").addClass("woo-sctr-checkout-countdown-popup-show"),s("sctv_checkout_countdown","shown",c),setTimeout(function(){jQuery(".woo-sctr-checkout-countdown-popup-wrap.woo-sctr-checkout-countdown-sticky-top").removeClass("woo-sctr-checkout-countdown-popup-show")},3e3)),t.change_type){case"auto_change":let e,n,u,r,d;if(c<(e="minute"===t.auto_change_time_type?60*t.auto_change_time*1e3:1e3*t.auto_change_time))return!1;if(d=Math.floor(c/e),n=c%e,u={action:"woo_sctr_set_checkout_discount",type:"auto_change",discount_amount:t.auto_change_discount_amount,discount_type:t.auto_change_discount_type},d>0)for(r=0;r<d;r++){let t=n+e*r;t>0&&setTimeout(function(t,c){o.ajax({type:"POST",url:c,data:t,success:function(o){"success"===o.status?setTimeout(function(){jQuery("body").trigger("wc_fragment_refresh"),jQuery("body").trigger("update_checkout"),jQuery("[name='update_cart']").length&&(jQuery("[name='update_cart']").prop("disabled",!1),jQuery(".woo-sctr-checkout-countdown-wrap-wrap").addClass("data-sctv_update"),jQuery("[name='update_cart']").trigger("click"))},300):"stop"===o.status&&window.location.reload()},error:function(o){console.log(JSON.stringify(o))}})},t,u,woo_sctr_checkout_countdown_shortcode.ajax_url)}break;case"custom":if(t.custom_minutes.length)for(let e=0;e<t.custom_minutes.length;e++){let n=60*parseInt(t.custom_minutes[e])+parseInt(t.custom_seconds[e]);if((n=1e3*n<c?c-1e3*n:0)>0){let c={action:"woo_sctr_set_checkout_discount",type:"custom",is_checkout:woo_sctr_checkout_countdown_shortcode.is_checkout||"no",message_og:t.custom_message_og[e],message_pg:t.custom_message_pg[e],free_ship:t.custom_free_ship[e],free_product:t.custom_free_product[e],discount_amount:t.custom_discount_amount[e]};setTimeout(function(t,c){o.ajax({type:"post",url:c,data:t,beforeSend:function(){},success:function(o){o.status&&"success"===o.status&&setTimeout(function(){jQuery("body").trigger("wc_fragment_refresh"),jQuery("body").trigger("update_checkout"),jQuery(".woo-sctr-checkout-countdown-wrap-wrap").addClass("data-sctv_update"),jQuery("[name='update_cart']").prop("disabled",!1),jQuery("[name='update_cart']").trigger("click")},300)},error:function(o){console.log(JSON.stringify(o))}})},n,c,woo_sctr_checkout_countdown_shortcode.ajax_url)}}}}function s(o,t,c){let e=new Date;e.setTime(e.getTime()+1e3*c);let n="expires="+e.toUTCString();document.cookie=o+"="+t+";"+n+";path=/"}t=woo_sctr_checkout_countdown_shortcode.checkout_countdown_default?woo_sctr_checkout_countdown_shortcode.checkout_countdown_default:"",c=woo_sctr_checkout_countdown_shortcode.sctv_checkout_countdown_details?1:"",e=woo_sctr_checkout_countdown_shortcode.time_end?1e3*parseInt(woo_sctr_checkout_countdown_shortcode.time_end):"",n(t,e,c),jQuery(document.body).on("updated_cart_totals",function(){if(jQuery(".woo-sctr-checkout-countdown-wrap-wrap").hasClass("data-sctv_update"))return jQuery(".woo-sctr-checkout-countdown-wrap-wrap").removeClass("data-sctv_update"),!1;if(!t)return!1;let u={action:"woo_sctr_set_session_on_cart_page",time_end:e};o.ajax({type:"post",url:woo_sctr_checkout_countdown_shortcode.ajax_url,data:u,beforeSend:function(){},success:function(u){(0===o(".woo-sctr-checkout-countdown-wrap-wrap").find(".woo-sctr-countdown-timer-layout").length&&c||u.status&&"success"===u.status&&o(".woo-sctr-checkout-countdown-wrap-wrap").find(".woo-sctr-countdown-timer-layout").length)&&setTimeout(function(){jQuery("[name='update_cart']").prop("disabled",!1),jQuery(".woo-sctr-checkout-countdown-wrap-wrap").addClass("data-sctv_update"),jQuery("[name='update_cart']").trigger("click")},100),u.has_detail?(c=1,o(".woo-sctr-checkout-countdown-wrap-wrap").not(".woo-sctr-checkout-countdown-popup-wrap").removeClass("woo-sctr-checkout-countdown-hidden")):c="",u.time_end&&(e=1e3*parseInt(u.time_end)),0===o(".woo-sctr-checkout-countdown-wrap-wrap").find(".woo-sctr-countdown-timer-layout").length&&c&&(o(".woo-sctr-checkout-countdown-wrap-wrap").load(" .woo-sctr-checkout-countdown-wrap-wrap > *",function(){0===o("#woo-sctr-shortcode-countdown-style").length&&(o("head").append('<link rel="stylesheet" id="woo-sctr-shortcode-countdown-style-css" href="'+u.shortcode_css_url+'?ver="'+u.shortcode_version+'" type="text/css" media="all"/>'),o("head").append('<style id="woo-sctr-shortcode-countdown-style-inline-css" type="text/css">')),o("#woo-sctr-shortcode-countdown-style-inline-css").load(" #woo-sctr-shortcode-countdown-style-inline-css"),sctv_run_countdown("checkout",1),n(t,e,c)}),setTimeout(function(){jQuery(".woo-sctr-checkout-countdown-popup-wrap.woo-sctr-checkout-countdown-sticky-top").addClass("woo-sctr-checkout-countdown-popup-show"),s("sctv_checkout_countdown","shown",e),setTimeout(function(){jQuery(".woo-sctr-checkout-countdown-popup-wrap.woo-sctr-checkout-countdown-sticky-top").removeClass("woo-sctr-checkout-countdown-popup-show")},3e3)},1e3))},error:function(o){console.log(JSON.stringify(o))}})}),o(document.body).on("removed_from_cart",function(){if(!t||!c||!e)return!1;o.ajax({type:"post",url:woo_sctr_checkout_countdown_shortcode.ajax_url,data:{action:"woo_sctr_set_session",type:"removed_from_cart"},beforeSend:function(){},success:function(o){c="1"===o.has_detail?1:"",o.status&&"success"===o.status&&setTimeout(function(){jQuery("body").trigger("wc_fragment_refresh"),jQuery("body").trigger("update_checkout")},300)},error:function(o){console.log(JSON.stringify(o))}})}),o(document.body).on("added_to_cart",function(){if(!t)return!1;if(c)return!1;let u={action:"woo_sctr_set_session",type:"added_to_cart",is_checkout:woo_sctr_checkout_countdown_shortcode.is_checkout||"no"};o.ajax({type:"post",url:woo_sctr_checkout_countdown_shortcode.ajax_url,data:u,beforeSend:function(){},success:function(u){"success"===u.status&&setTimeout(function(){jQuery("body").trigger("wc_fragment_refresh"),jQuery("body").trigger("update_checkout")},300),u.has_detail?(c=1,o(".woo-sctr-checkout-countdown-wrap-wrap").not(".woo-sctr-checkout-countdown-popup-wrap").removeClass("woo-sctr-checkout-countdown-hidden")):c="",u.time_end&&(e=1e3*parseInt(u.time_end)),u.html&&(o(".woo-sctr-checkout-countdown-wrap-wrap").load(" .woo-sctr-checkout-countdown-wrap-wrap > *",function(){0===o("#woo-sctr-shortcode-countdown-style").length&&(o("head").append('<link rel="stylesheet" id="woo-sctr-shortcode-countdown-style-css" href="'+u.shortcode_css_url+'?ver="'+u.shortcode_version+'" type="text/css" media="all"/>'),o("head").append('<style id="woo-sctr-shortcode-countdown-style-inline-css" type="text/css">')),o("#woo-sctr-shortcode-countdown-style-inline-css").load(" #woo-sctr-shortcode-countdown-style-inline-css "),sctv_run_countdown("checkout",1)}),setTimeout(function(){jQuery(".woo-sctr-checkout-countdown-popup-wrap.woo-sctr-checkout-countdown-sticky-top").addClass("woo-sctr-checkout-countdown-popup-show"),s("sctv_checkout_countdown","shown",e),setTimeout(function(){jQuery(".woo-sctr-checkout-countdown-popup-wrap.woo-sctr-checkout-countdown-sticky-top").removeClass("woo-sctr-checkout-countdown-popup-show")},3e3)},1e3)),t&&u.has_detail&&u.time_end&&n(t,e,c)},error:function(o){console.log(JSON.stringify(o))}})})});